annotations:
  - border_color: '#808080FF'
    border_radius: 2
    border_style: ''
    color: '#29AFD6FF'
    thickness: 1
    type: rectangle
    x1: 40.0
    y1: 40.0
    x2: 440.0
    y2: 400.0
    z_index: 0
  - border_color: '#808080FF'
    border_radius: 2
    border_style: ''
    color: '#AFA9A9FF'
    thickness: 1
    type: rectangle
    x1: 600.0
    y1: 26.0
    x2: 240.0
    y2: 120.0
    z_index: 1
  - border_color: '#808080FF'
    border_radius: 2
    border_style: ''
    color: '#97809CFF'
    thickness: 1
    type: rectangle
    x1: 598.0
    y1: 291.0
    x2: 240.0
    y2: 120.0
    z_index: 2
  - border_color: '#808080FF'
    border_radius: 2
    border_style: ''
    color: '#BCDBBFFF'
    thickness: 1
    type: rectangle
    x1: 930.0
    y1: 0.0
    x2: 200.0
    y2: 440.0
    z_index: 3
  - border_color: '#808080FF'
    border_radius: 2
    border_style: ''
    color: '#DDD5B9FF'
    thickness: 1
    type: rectangle
    x1: 1160.0
    y1: 160.0
    x2: 160.0
    y2: 120.0
    z_index: 4
  - border_color: '#00000000'
    border_style: ''
    color: '#020202FF'
    rotation: 0
    text_bold: true
    text_content: AS 65001
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: 58.0
    y1: 58.0
    z_index: 5
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: false
    text_content: ''
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: 600.0
    y1: 40.0
    z_index: 6
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: false
    text_content: ''
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: 640.0
    y1: 320.0
    z_index: 7
  - border_color: '#00000000'
    border_style: ''
    color: '#000000FF'
    rotation: 0
    text_bold: true
    text_content: AS 65005
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: 941.0
    y1: 12.0
    z_index: 8
  - border_color: '#00000000'
    border_style: ''
    color: '#000000FF'
    rotation: 0
    text_bold: true
    text_content: AS 65006
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: 1233.0
    y1: 169.0
    z_index: 9
  - border_color: '#00000000'
    border_style: ''
    color: '#000000FF'
    rotation: 0
    text_bold: true
    text_content: AS 65004
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: 611.0
    y1: 36.0
    z_index: 10
  - border_color: '#00000000'
    border_style: ''
    color: '#000000FF'
    rotation: 0
    text_bold: true
    text_content: AS 65008
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: 606.0
    y1: 302.0
    z_index: 11
nodes:
  - boot_disk_size: null
    configuration: |-
      Building configuration...

      Current configuration : 3936 bytes
      !
      ! Last configuration change at 18:11:15 UTC Fri Nov 4 2022
      !
      version 15.9
      service timestamps debug datetime msec
      service timestamps log datetime msec
      no service password-encryption
      !
      hostname R2
      !
      boot-start-marker
      boot-end-marker
      !
      !
      !
      no aaa new-model
      !
      !
      !
      mmi polling-interval 60
      no mmi auto-configure
      no mmi pvc
      mmi snmp-timeout 180
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      ip cef
      no ipv6 cef
      !
      multilink bundle-name authenticated
      !
      !
      !
      !
      !
      redundancy
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      interface Loopback1
       ip address 172.16.1.2 255.255.255.255
       ip ospf network point-to-point
      !
      interface GigabitEthernet0/0
       description link to R1
       ip address 192.168.12.2 255.255.255.0
       duplex auto
       speed auto
       media-type rj45
      !
      interface GigabitEthernet0/1
       description link to R4
       ip address 192.168.24.2 255.255.255.0
       duplex auto
       speed auto
       media-type rj45
      !
      interface GigabitEthernet0/2
       description link to R3
       ip address 192.168.23.2 255.255.255.0
       duplex auto
       speed auto
       media-type rj45
      !
      interface GigabitEthernet0/3
       no ip address
       shutdown
       duplex auto
       speed auto
       media-type rj45
      !
      router ospf 1
       network 172.16.1.2 0.0.0.0 area 0
       network 192.168.12.0 0.0.0.255 area 0
       network 192.168.23.0 0.0.0.255 area 0
      !
      router bgp 65001
       bgp log-neighbor-changes
       neighbor 172.16.1.1 remote-as 65001
       neighbor 172.16.1.1 update-source Loopback1
       neighbor 172.16.1.1 next-hop-self
       neighbor 172.16.1.3 remote-as 65001
       neighbor 172.16.1.3 update-source Loopback1
       neighbor 172.16.1.3 next-hop-self
       neighbor 172.16.4.4 remote-as 65004
       neighbor 172.16.4.4 update-source Loopback1
       neighbor 172.16.4.4 route-map PREPEND in
      !
      ip forward-protocol nd
      !
      !
      no ip http server
      no ip http secure-server
      ip route 172.16.4.4 255.255.255.255 192.168.24.4
      !
      !
      ip prefix-list AS65006 seq 5 permit 10.1.6.0/24
      ipv6 ioam timestamp
      !
      route-map PREPEND permit 10
       match ip address prefix-list AS65006
       set as-path prepend 65020 65025 65030
      !
      route-map PREPEND permit 20
      !
      !
      !
      control-plane
      !
      banner exec ^C
      **************************************************************************
      * IOSv is strictly limited to use for evaluation, demonstration and IOS  *
      * education. IOSv is provided as-is and is not supported by Cisco's      *
      * Technical Advisory Center. Any use or disclosure, in whole or in part, *
      * of the IOSv Software or Documentation to any third party for any       *
      * purposes is expressly prohibited except as otherwise authorized by     *
      * Cisco in writing.                                                      *
      **************************************************************************^C
      banner incoming ^C
      **************************************************************************
      * IOSv is strictly limited to use for evaluation, demonstration and IOS  *
      * education. IOSv is provided as-is and is not supported by Cisco's      *
      * Technical Advisory Center. Any use or disclosure, in whole or in part, *
      * of the IOSv Software or Documentation to any third party for any       *
      * purposes is expressly prohibited except as otherwise authorized by     *
      * Cisco in writing.                                                      *
      **************************************************************************^C
      banner login ^C
      **************************************************************************
      * IOSv is strictly limited to use for evaluation, demonstration and IOS  *
      * education. IOSv is provided as-is and is not supported by Cisco's      *
      * Technical Advisory Center. Any use or disclosure, in whole or in part, *
      * of the IOSv Software or Documentation to any third party for any       *
      * purposes is expressly prohibited except as otherwise authorized by     *
      * Cisco in writing.                                                      *
      **************************************************************************^C
      !
      line con 0
       exec-timeout 0 0
      line aux 0
      line vty 0 4
       login
       transport input none
      !
      no scheduler allocate
      !
      end
    cpu_limit: 100
    cpus: null
    data_volume: null
    hide_links: false
    id: n0
    image_definition: null
    label: R2
    node_definition: iosv
    ram: 512
    tags: []
    x: 385
    y: 82
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: GigabitEthernet0/0
        slot: 0
        type: physical
      - id: i2
        label: GigabitEthernet0/1
        slot: 1
        type: physical
      - id: i3
        label: GigabitEthernet0/2
        slot: 2
        type: physical
      - id: i4
        label: GigabitEthernet0/3
        slot: 3
        type: physical
  - boot_disk_size: null
    configuration: |-
      Building configuration...

      Current configuration : 3483 bytes
      !
      ! Last configuration change at 18:11:07 UTC Fri Nov 4 2022
      !
      version 15.9
      service timestamps debug datetime msec
      service timestamps log datetime msec
      no service password-encryption
      !
      hostname R4
      !
      boot-start-marker
      boot-end-marker
      !
      !
      !
      no aaa new-model
      !
      !
      !
      mmi polling-interval 60
      no mmi auto-configure
      no mmi pvc
      mmi snmp-timeout 180
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      ip cef
      no ipv6 cef
      !
      multilink bundle-name authenticated
      !
      !
      !
      !
      !
      redundancy
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      interface Loopback0
       ip address 10.1.4.1 255.255.255.0
      !
      interface Loopback1
       ip address 172.16.4.4 255.255.255.255
      !
      interface GigabitEthernet0/0
       description link to R5
       ip address 192.168.45.4 255.255.255.0
       duplex auto
       speed auto
       media-type rj45
      !
      interface GigabitEthernet0/1
       description link to R2
       ip address 192.168.24.4 255.255.255.0
       duplex auto
       speed auto
       media-type rj45
      !
      interface GigabitEthernet0/2
       no ip address
       shutdown
       duplex auto
       speed auto
       media-type rj45
      !
      interface GigabitEthernet0/3
       no ip address
       shutdown
       duplex auto
       speed auto
       media-type rj45
      !
      router bgp 65004
       bgp log-neighbor-changes
       network 10.1.4.0 mask 255.255.255.0
       neighbor 172.16.1.2 remote-as 65001
       neighbor 172.16.1.2 ebgp-multihop 2
       neighbor 172.16.1.2 update-source Loopback1
       neighbor 192.168.24.2 remote-as 65001
       neighbor 192.168.45.5 remote-as 65005
      !
      ip forward-protocol nd
      !
      !
      no ip http server
      no ip http secure-server
      ip route 172.16.1.2 255.255.255.255 192.168.24.2
      !
      ipv6 ioam timestamp
      !
      !
      !
      control-plane
      !
      banner exec ^C
      **************************************************************************
      * IOSv is strictly limited to use for evaluation, demonstration and IOS  *
      * education. IOSv is provided as-is and is not supported by Cisco's      *
      * Technical Advisory Center. Any use or disclosure, in whole or in part, *
      * of the IOSv Software or Documentation to any third party for any       *
      * purposes is expressly prohibited except as otherwise authorized by     *
      * Cisco in writing.                                                      *
      **************************************************************************^C
      banner incoming ^C
      **************************************************************************
      * IOSv is strictly limited to use for evaluation, demonstration and IOS  *
      * education. IOSv is provided as-is and is not supported by Cisco's      *
      * Technical Advisory Center. Any use or disclosure, in whole or in part, *
      * of the IOSv Software or Documentation to any third party for any       *
      * purposes is expressly prohibited except as otherwise authorized by     *
      * Cisco in writing.                                                      *
      **************************************************************************^C
      banner login ^C
      **************************************************************************
      * IOSv is strictly limited to use for evaluation, demonstration and IOS  *
      * education. IOSv is provided as-is and is not supported by Cisco's      *
      * Technical Advisory Center. Any use or disclosure, in whole or in part, *
      * of the IOSv Software or Documentation to any third party for any       *
      * purposes is expressly prohibited except as otherwise authorized by     *
      * Cisco in writing.                                                      *
      **************************************************************************^C
      !
      line con 0
       exec-timeout 0 0
      line aux 0
      line vty 0 4
       login
       transport input none
      !
      no scheduler allocate
      !
      end
    cpu_limit: 100
    cpus: null
    data_volume: null
    hide_links: false
    id: n1
    image_definition: null
    label: R4
    node_definition: iosv
    ram: 512
    tags: []
    x: 719
    y: 86
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: GigabitEthernet0/0
        slot: 0
        type: physical
      - id: i2
        label: GigabitEthernet0/1
        slot: 1
        type: physical
      - id: i3
        label: GigabitEthernet0/2
        slot: 2
        type: physical
      - id: i4
        label: GigabitEthernet0/3
        slot: 3
        type: physical
  - boot_disk_size: null
    configuration: |-
      Building configuration...

      Current configuration : 3755 bytes
      !
      ! Last configuration change at 18:11:04 UTC Fri Nov 4 2022
      !
      version 15.9
      service timestamps debug datetime msec
      service timestamps log datetime msec
      no service password-encryption
      !
      hostname R1
      !
      boot-start-marker
      boot-end-marker
      !
      !
      !
      no aaa new-model
      !
      !
      !
      mmi polling-interval 60
      no mmi auto-configure
      no mmi pvc
      mmi snmp-timeout 180
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      ip cef
      no ipv6 cef
      !
      multilink bundle-name authenticated
      !
      !
      !
      !
      !
      redundancy
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      interface Loopback0
       ip address 10.1.1.1 255.255.255.0
      !
      interface Loopback1
       ip address 172.16.1.1 255.255.255.255
       ip ospf network point-to-point
      !
      interface GigabitEthernet0/0
       description link to R2
       ip address 192.168.12.1 255.255.255.0
       duplex auto
       speed auto
       media-type rj45
      !
      interface GigabitEthernet0/1
       description link to R3
       ip address 192.168.13.1 255.255.255.0
       duplex auto
       speed auto
       media-type rj45
      !
      interface GigabitEthernet0/2
       no ip address
       shutdown
       duplex auto
       speed auto
       media-type rj45
      !
      interface GigabitEthernet0/3
       no ip address
       shutdown
       duplex auto
       speed auto
       media-type rj45
      !
      router ospf 1
       network 172.16.1.1 0.0.0.0 area 0
       network 192.168.12.0 0.0.0.255 area 0
       network 192.168.13.0 0.0.0.255 area 0
      !
      router bgp 65001
       synchronization
       bgp log-neighbor-changes
       network 10.1.1.0 mask 255.255.255.0
       neighbor 172.16.1.2 remote-as 65001
       neighbor 172.16.1.2 update-source Loopback0
       neighbor 172.16.1.3 remote-as 65001
       neighbor 172.16.1.3 update-source Loopback0
       neighbor 172.16.1.3 route-map WEIGHT in
      !
      ip forward-protocol nd
      !
      !
      no ip http server
      no ip http secure-server
      !
      ipv6 ioam timestamp
      !
      route-map WEIGHT permit 10
       match ip address 1
       set weight 1000
      !
      route-map WEIGHT permit 20
      !
      !
      access-list 1 permit 10.1.6.0 0.0.0.255
      !
      control-plane
      !
      banner exec ^C
      **************************************************************************
      * IOSv is strictly limited to use for evaluation, demonstration and IOS  *
      * education. IOSv is provided as-is and is not supported by Cisco's      *
      * Technical Advisory Center. Any use or disclosure, in whole or in part, *
      * of the IOSv Software or Documentation to any third party for any       *
      * purposes is expressly prohibited except as otherwise authorized by     *
      * Cisco in writing.                                                      *
      **************************************************************************^C
      banner incoming ^C
      **************************************************************************
      * IOSv is strictly limited to use for evaluation, demonstration and IOS  *
      * education. IOSv is provided as-is and is not supported by Cisco's      *
      * Technical Advisory Center. Any use or disclosure, in whole or in part, *
      * of the IOSv Software or Documentation to any third party for any       *
      * purposes is expressly prohibited except as otherwise authorized by     *
      * Cisco in writing.                                                      *
      **************************************************************************^C
      banner login ^C
      **************************************************************************
      * IOSv is strictly limited to use for evaluation, demonstration and IOS  *
      * education. IOSv is provided as-is and is not supported by Cisco's      *
      * Technical Advisory Center. Any use or disclosure, in whole or in part, *
      * of the IOSv Software or Documentation to any third party for any       *
      * purposes is expressly prohibited except as otherwise authorized by     *
      * Cisco in writing.                                                      *
      **************************************************************************^C
      !
      line con 0
       exec-timeout 0 0
      line aux 0
      line vty 0 4
       login
       transport input none
      !
      no scheduler allocate
      !
      end
    cpu_limit: 100
    cpus: null
    data_volume: null
    hide_links: false
    id: n2
    image_definition: null
    label: R1
    node_definition: iosv
    ram: 512
    tags: []
    x: 91
    y: 234
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: GigabitEthernet0/0
        slot: 0
        type: physical
      - id: i2
        label: GigabitEthernet0/1
        slot: 1
        type: physical
      - id: i3
        label: GigabitEthernet0/2
        slot: 2
        type: physical
      - id: i4
        label: GigabitEthernet0/3
        slot: 3
        type: physical
  - boot_disk_size: null
    configuration: |-
      Building configuration...

      Current configuration : 3752 bytes
      !
      ! Last configuration change at 18:11:13 UTC Fri Nov 4 2022
      !
      version 15.9
      service timestamps debug datetime msec
      service timestamps log datetime msec
      no service password-encryption
      !
      hostname R3
      !
      boot-start-marker
      boot-end-marker
      !
      !
      !
      no aaa new-model
      !
      !
      !
      mmi polling-interval 60
      no mmi auto-configure
      no mmi pvc
      mmi snmp-timeout 180
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      ip cef
      no ipv6 cef
      !
      multilink bundle-name authenticated
      !
      !
      !
      !
      !
      redundancy
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      interface Loopback1
       ip address 172.16.1.3 255.255.255.255
       ip ospf network point-to-point
      !
      interface GigabitEthernet0/0
       description link to R1
       ip address 192.168.13.3 255.255.255.0
       duplex auto
       speed auto
       media-type rj45
      !
      interface GigabitEthernet0/1
       description link to R8
       ip address 192.168.38.3 255.255.255.0
       duplex auto
       speed auto
       media-type rj45
      !
      interface GigabitEthernet0/2
       description link to R2
       ip address 192.168.23.3 255.255.255.0
       duplex auto
       speed auto
       media-type rj45
      !
      interface GigabitEthernet0/3
       no ip address
       shutdown
       duplex auto
       speed auto
       media-type rj45
      !
      router ospf 1
       network 172.16.1.3 0.0.0.0 area 0
       network 192.168.13.0 0.0.0.255 area 0
       network 192.168.23.0 0.0.0.255 area 0
      !
      router bgp 65001
       bgp log-neighbor-changes
       neighbor 172.16.1.1 remote-as 65001
       neighbor 172.16.1.1 update-source Loopback1
       neighbor 172.16.1.2 remote-as 65001
       neighbor 172.16.1.2 update-source Loopback1
       neighbor 172.16.1.2 next-hop-self
       neighbor 192.168.38.8 remote-as 65008
       neighbor 192.168.38.8 route-map LP in
      !
      ip forward-protocol nd
      !
      ip as-path access-list 3 permit _65008$
      !
      no ip http server
      no ip http secure-server
      !
      ipv6 ioam timestamp
      !
      route-map LP permit 10
       match as-path 3
       set local-preference 200
      !
      route-map LP permit 20
      !
      !
      !
      control-plane
      !
      banner exec ^C
      **************************************************************************
      * IOSv is strictly limited to use for evaluation, demonstration and IOS  *
      * education. IOSv is provided as-is and is not supported by Cisco's      *
      * Technical Advisory Center. Any use or disclosure, in whole or in part, *
      * of the IOSv Software or Documentation to any third party for any       *
      * purposes is expressly prohibited except as otherwise authorized by     *
      * Cisco in writing.                                                      *
      **************************************************************************^C
      banner incoming ^C
      **************************************************************************
      * IOSv is strictly limited to use for evaluation, demonstration and IOS  *
      * education. IOSv is provided as-is and is not supported by Cisco's      *
      * Technical Advisory Center. Any use or disclosure, in whole or in part, *
      * of the IOSv Software or Documentation to any third party for any       *
      * purposes is expressly prohibited except as otherwise authorized by     *
      * Cisco in writing.                                                      *
      **************************************************************************^C
      banner login ^C
      **************************************************************************
      * IOSv is strictly limited to use for evaluation, demonstration and IOS  *
      * education. IOSv is provided as-is and is not supported by Cisco's      *
      * Technical Advisory Center. Any use or disclosure, in whole or in part, *
      * of the IOSv Software or Documentation to any third party for any       *
      * purposes is expressly prohibited except as otherwise authorized by     *
      * Cisco in writing.                                                      *
      **************************************************************************^C
      !
      line con 0
       exec-timeout 0 0
      line aux 0
      line vty 0 4
       login
       transport input none
      !
      no scheduler allocate
      !
      end
    cpu_limit: 100
    cpus: null
    data_volume: null
    hide_links: false
    id: n3
    image_definition: null
    label: R3
    node_definition: iosv
    ram: 512
    tags: []
    x: 383
    y: 352
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: GigabitEthernet0/0
        slot: 0
        type: physical
      - id: i2
        label: GigabitEthernet0/1
        slot: 1
        type: physical
      - id: i3
        label: GigabitEthernet0/2
        slot: 2
        type: physical
      - id: i4
        label: GigabitEthernet0/3
        slot: 3
        type: physical
  - boot_disk_size: null
    configuration: |-
      Building configuration...

      Current configuration : 3254 bytes
      !
      ! Last configuration change at 18:10:56 UTC Fri Nov 4 2022
      !
      version 15.9
      service timestamps debug datetime msec
      service timestamps log datetime msec
      no service password-encryption
      !
      hostname R8
      !
      boot-start-marker
      boot-end-marker
      !
      !
      !
      no aaa new-model
      !
      !
      !
      mmi polling-interval 60
      no mmi auto-configure
      no mmi pvc
      mmi snmp-timeout 180
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      ip cef
      no ipv6 cef
      !
      multilink bundle-name authenticated
      !
      !
      !
      !
      !
      redundancy
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      interface Loopback0
       ip address 10.1.8.1 255.255.255.0
      !
      interface GigabitEthernet0/0
       description link to R7
       ip address 192.168.78.8 255.255.255.0
       duplex auto
       speed auto
       media-type rj45
      !
      interface GigabitEthernet0/1
       description link to R3
       ip address 192.168.38.8 255.255.255.0
       duplex auto
       speed auto
       media-type rj45
      !
      interface GigabitEthernet0/2
       no ip address
       shutdown
       duplex auto
       speed auto
       media-type rj45
      !
      interface GigabitEthernet0/3
       no ip address
       shutdown
       duplex auto
       speed auto
       media-type rj45
      !
      router bgp 65008
       bgp log-neighbor-changes
       network 10.1.8.0 mask 255.255.255.0
       neighbor 192.168.38.3 remote-as 65001
       neighbor 192.168.78.7 remote-as 65005
      !
      ip forward-protocol nd
      !
      !
      no ip http server
      no ip http secure-server
      !
      ipv6 ioam timestamp
      !
      !
      !
      control-plane
      !
      banner exec ^C
      **************************************************************************
      * IOSv is strictly limited to use for evaluation, demonstration and IOS  *
      * education. IOSv is provided as-is and is not supported by Cisco's      *
      * Technical Advisory Center. Any use or disclosure, in whole or in part, *
      * of the IOSv Software or Documentation to any third party for any       *
      * purposes is expressly prohibited except as otherwise authorized by     *
      * Cisco in writing.                                                      *
      **************************************************************************^C
      banner incoming ^C
      **************************************************************************
      * IOSv is strictly limited to use for evaluation, demonstration and IOS  *
      * education. IOSv is provided as-is and is not supported by Cisco's      *
      * Technical Advisory Center. Any use or disclosure, in whole or in part, *
      * of the IOSv Software or Documentation to any third party for any       *
      * purposes is expressly prohibited except as otherwise authorized by     *
      * Cisco in writing.                                                      *
      **************************************************************************^C
      banner login ^C
      **************************************************************************
      * IOSv is strictly limited to use for evaluation, demonstration and IOS  *
      * education. IOSv is provided as-is and is not supported by Cisco's      *
      * Technical Advisory Center. Any use or disclosure, in whole or in part, *
      * of the IOSv Software or Documentation to any third party for any       *
      * purposes is expressly prohibited except as otherwise authorized by     *
      * Cisco in writing.                                                      *
      **************************************************************************^C
      !
      line con 0
       exec-timeout 0 0
      line aux 0
      line vty 0 4
       login
       transport input none
      !
      no scheduler allocate
      !
      end
    cpu_limit: 100
    cpus: null
    data_volume: null
    hide_links: false
    id: n4
    image_definition: null
    label: R8
    node_definition: iosv
    ram: 512
    tags: []
    x: 712
    y: 354
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: GigabitEthernet0/0
        slot: 0
        type: physical
      - id: i2
        label: GigabitEthernet0/1
        slot: 1
        type: physical
      - id: i3
        label: GigabitEthernet0/2
        slot: 2
        type: physical
      - id: i4
        label: GigabitEthernet0/3
        slot: 3
        type: physical
  - boot_disk_size: null
    configuration: |-
      Building configuration...

      Current configuration : 3160 bytes
      !
      ! Last configuration change at 18:11:11 UTC Fri Nov 4 2022
      !
      version 15.9
      service timestamps debug datetime msec
      service timestamps log datetime msec
      no service password-encryption
      !
      hostname R5
      !
      boot-start-marker
      boot-end-marker
      !
      !
      !
      no aaa new-model
      !
      !
      !
      mmi polling-interval 60
      no mmi auto-configure
      no mmi pvc
      mmi snmp-timeout 180
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      ip cef
      no ipv6 cef
      !
      multilink bundle-name authenticated
      !
      !
      !
      !
      !
      redundancy
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      interface GigabitEthernet0/0
       description link to R4
       ip address 192.168.45.5 255.255.255.0
       duplex auto
       speed auto
       media-type rj45
      !
      interface GigabitEthernet0/1
       description link to R6
       ip address 192.168.56.5 255.255.255.0
       duplex auto
       speed auto
       media-type rj45
      !
      interface GigabitEthernet0/2
       no ip address
       shutdown
       duplex auto
       speed auto
       media-type rj45
      !
      interface GigabitEthernet0/3
       no ip address
       shutdown
       duplex auto
       speed auto
       media-type rj45
      !
      router bgp 65005
       bgp log-neighbor-changes
       neighbor 192.168.45.4 remote-as 65005
       neighbor 192.168.56.6 remote-as 65006
      !
      ip forward-protocol nd
      !
      !
      no ip http server
      no ip http secure-server
      !
      !
      route-map MED permit 10
       match ip address 6
       set metric 50
      !
      route-map MED permit 20
      !
      !
      access-list 6 permit 10.1.1.0 0.0.0.255
      !
      ipv6 ioam timestamp
      !
      !
      !
      control-plane
      !
      banner exec ^C
      **************************************************************************
      * IOSv is strictly limited to use for evaluation, demonstration and IOS  *
      * education. IOSv is provided as-is and is not supported by Cisco's      *
      * Technical Advisory Center. Any use or disclosure, in whole or in part, *
      * of the IOSv Software or Documentation to any third party for any       *
      * purposes is expressly prohibited except as otherwise authorized by     *
      * Cisco in writing.                                                      *
      **************************************************************************^C
      banner incoming ^C
      **************************************************************************
      * IOSv is strictly limited to use for evaluation, demonstration and IOS  *
      * education. IOSv is provided as-is and is not supported by Cisco's      *
      * Technical Advisory Center. Any use or disclosure, in whole or in part, *
      * of the IOSv Software or Documentation to any third party for any       *
      * purposes is expressly prohibited except as otherwise authorized by     *
      * Cisco in writing.                                                      *
      **************************************************************************^C
      banner login ^C
      **************************************************************************
      * IOSv is strictly limited to use for evaluation, demonstration and IOS  *
      * education. IOSv is provided as-is and is not supported by Cisco's      *
      * Technical Advisory Center. Any use or disclosure, in whole or in part, *
      * of the IOSv Software or Documentation to any third party for any       *
      * purposes is expressly prohibited except as otherwise authorized by     *
      * Cisco in writing.                                                      *
      **************************************************************************^C
      !
      line con 0
       exec-timeout 0 0
      line aux 0
      line vty 0 4
       login
       transport input none
      !
      no scheduler allocate
      !
      end
    cpu_limit: 100
    cpus: null
    data_volume: null
    hide_links: false
    id: n5
    image_definition: null
    label: R5
    node_definition: iosv
    ram: 512
    tags: []
    x: 1040
    y: 83
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: GigabitEthernet0/0
        slot: 0
        type: physical
      - id: i2
        label: GigabitEthernet0/1
        slot: 1
        type: physical
      - id: i3
        label: GigabitEthernet0/2
        slot: 2
        type: physical
      - id: i4
        label: GigabitEthernet0/3
        slot: 3
        type: physical
  - boot_disk_size: null
    configuration: |-
      Building configuration...

      Current configuration : 3280 bytes
      !
      ! Last configuration change at 18:11:03 UTC Fri Nov 4 2022
      !
      version 15.9
      service timestamps debug datetime msec
      service timestamps log datetime msec
      no service password-encryption
      !
      hostname R7
      !
      boot-start-marker
      boot-end-marker
      !
      !
      !
      no aaa new-model
      !
      !
      !
      mmi polling-interval 60
      no mmi auto-configure
      no mmi pvc
      mmi snmp-timeout 180
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      ip cef
      no ipv6 cef
      !
      multilink bundle-name authenticated
      !
      !
      !
      !
      !
      redundancy
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      interface GigabitEthernet0/0
       description link to R8
       ip address 192.168.78.7 255.255.255.0
       duplex auto
       speed auto
       media-type rj45
      !
      interface GigabitEthernet0/1
       description link to R6
       ip address 192.168.67.7 255.255.255.0
       ip access-group FILTER in
       duplex auto
       speed auto
       media-type rj45
      !
      interface GigabitEthernet0/2
       no ip address
       shutdown
       duplex auto
       speed auto
       media-type rj45
      !
      interface GigabitEthernet0/3
       no ip address
       shutdown
       duplex auto
       speed auto
       media-type rj45
      !
      router bgp 65005
       bgp log-neighbor-changes
       neighbor 192.168.67.6 remote-as 65006
       neighbor 192.168.78.8 remote-as 65008
      !
      ip forward-protocol nd
      !
      !
      no ip http server
      no ip http secure-server
      !
      ip access-list extended FILTER
       permit icmp any any
       permit udp any any
       deny   ip any any
      !
      ipv6 ioam timestamp
      !
      !
      !
      control-plane
      !
      banner exec ^C
      **************************************************************************
      * IOSv is strictly limited to use for evaluation, demonstration and IOS  *
      * education. IOSv is provided as-is and is not supported by Cisco's      *
      * Technical Advisory Center. Any use or disclosure, in whole or in part, *
      * of the IOSv Software or Documentation to any third party for any       *
      * purposes is expressly prohibited except as otherwise authorized by     *
      * Cisco in writing.                                                      *
      **************************************************************************^C
      banner incoming ^C
      **************************************************************************
      * IOSv is strictly limited to use for evaluation, demonstration and IOS  *
      * education. IOSv is provided as-is and is not supported by Cisco's      *
      * Technical Advisory Center. Any use or disclosure, in whole or in part, *
      * of the IOSv Software or Documentation to any third party for any       *
      * purposes is expressly prohibited except as otherwise authorized by     *
      * Cisco in writing.                                                      *
      **************************************************************************^C
      banner login ^C
      **************************************************************************
      * IOSv is strictly limited to use for evaluation, demonstration and IOS  *
      * education. IOSv is provided as-is and is not supported by Cisco's      *
      * Technical Advisory Center. Any use or disclosure, in whole or in part, *
      * of the IOSv Software or Documentation to any third party for any       *
      * purposes is expressly prohibited except as otherwise authorized by     *
      * Cisco in writing.                                                      *
      **************************************************************************^C
      !
      line con 0
       exec-timeout 0 0
      line aux 0
      line vty 0 4
       login
       transport input none
      !
      no scheduler allocate
      !
      end
    cpu_limit: 100
    cpus: null
    data_volume: null
    hide_links: false
    id: n6
    image_definition: null
    label: R7
    node_definition: iosv
    ram: 512
    tags: []
    x: 1042
    y: 349
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: GigabitEthernet0/0
        slot: 0
        type: physical
      - id: i2
        label: GigabitEthernet0/1
        slot: 1
        type: physical
      - id: i3
        label: GigabitEthernet0/2
        slot: 2
        type: physical
      - id: i4
        label: GigabitEthernet0/3
        slot: 3
        type: physical
  - boot_disk_size: null
    configuration: |-
      Building configuration...

      Current configuration : 3294 bytes
      !
      ! Last configuration change at 18:11:08 UTC Fri Nov 4 2022
      !
      version 15.9
      service timestamps debug datetime msec
      service timestamps log datetime msec
      no service password-encryption
      !
      hostname R6
      !
      boot-start-marker
      boot-end-marker
      !
      !
      !
      no aaa new-model
      !
      !
      !
      mmi polling-interval 60
      no mmi auto-configure
      no mmi pvc
      mmi snmp-timeout 180
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      ip cef
      no ipv6 cef
      !
      multilink bundle-name authenticated
      !
      !
      !
      !
      !
      redundancy
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      !
      interface Loopback0
       ip address 10.1.6.1 255.255.255.0
      !
      interface GigabitEthernet0/0
       description link to R5
       ip address 192.168.56.6 255.255.255.0
       duplex auto
       speed auto
       media-type rj45
      !
      interface GigabitEthernet0/1
       description link to R7
       ip address 192.168.67.6 255.255.255.0
       duplex auto
       speed auto
       media-type rj45
      !
      interface GigabitEthernet0/2
       no ip address
       shutdown
       duplex auto
       speed auto
       media-type rj45
      !
      interface GigabitEthernet0/3
       no ip address
       shutdown
       duplex auto
       speed auto
       media-type rj45
      !
      router bgp 65006
       bgp log-neighbor-changes
       network 10.1.6.0 mask 255.255.255.0
       neighbor 192.168.56.5 remote-as 65005
       neighbor 192.168.67.7 remote-as 65005
       neighbor 192.168.67.7 route-map MED in
      !
      ip forward-protocol nd
      !
      !
      no ip http server
      no ip http secure-server
      !
      ipv6 ioam timestamp
      !
      !
      !
      control-plane
      !
      banner exec ^C
      **************************************************************************
      * IOSv is strictly limited to use for evaluation, demonstration and IOS  *
      * education. IOSv is provided as-is and is not supported by Cisco's      *
      * Technical Advisory Center. Any use or disclosure, in whole or in part, *
      * of the IOSv Software or Documentation to any third party for any       *
      * purposes is expressly prohibited except as otherwise authorized by     *
      * Cisco in writing.                                                      *
      **************************************************************************^C
      banner incoming ^C
      **************************************************************************
      * IOSv is strictly limited to use for evaluation, demonstration and IOS  *
      * education. IOSv is provided as-is and is not supported by Cisco's      *
      * Technical Advisory Center. Any use or disclosure, in whole or in part, *
      * of the IOSv Software or Documentation to any third party for any       *
      * purposes is expressly prohibited except as otherwise authorized by     *
      * Cisco in writing.                                                      *
      **************************************************************************^C
      banner login ^C
      **************************************************************************
      * IOSv is strictly limited to use for evaluation, demonstration and IOS  *
      * education. IOSv is provided as-is and is not supported by Cisco's      *
      * Technical Advisory Center. Any use or disclosure, in whole or in part, *
      * of the IOSv Software or Documentation to any third party for any       *
      * purposes is expressly prohibited except as otherwise authorized by     *
      * Cisco in writing.                                                      *
      **************************************************************************^C
      !
      line con 0
       exec-timeout 0 0
      line aux 0
      line vty 0 4
       login
       transport input none
      !
      no scheduler allocate
      !
      end
    cpu_limit: 100
    cpus: null
    data_volume: null
    hide_links: false
    id: n7
    image_definition: null
    label: R6
    node_definition: iosv
    ram: 512
    tags: []
    x: 1246
    y: 230
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: GigabitEthernet0/0
        slot: 0
        type: physical
      - id: i2
        label: GigabitEthernet0/1
        slot: 1
        type: physical
      - id: i3
        label: GigabitEthernet0/2
        slot: 2
        type: physical
      - id: i4
        label: GigabitEthernet0/3
        slot: 3
        type: physical
links:
  - id: l0
    n1: n2
    n2: n0
    i1: i1
    i2: i1
    conditioning: {}
    label: R1-GigabitEthernet0/0<->R2-GigabitEthernet0/0
  - id: l1
    n1: n2
    n2: n3
    i1: i2
    i2: i1
    conditioning: {}
    label: R1-GigabitEthernet0/1<->R3-GigabitEthernet0/0
  - id: l2
    n1: n3
    n2: n4
    i1: i2
    i2: i2
    conditioning: {}
    label: R3-GigabitEthernet0/1<->R8-GigabitEthernet0/1
  - id: l3
    n1: n0
    n2: n1
    i1: i2
    i2: i2
    conditioning: {}
    label: R2-GigabitEthernet0/1<->R4-GigabitEthernet0/1
  - id: l4
    n1: n1
    n2: n5
    i1: i1
    i2: i1
    conditioning: {}
    label: R4-GigabitEthernet0/0<->R5-GigabitEthernet0/0
  - id: l5
    n1: n4
    n2: n6
    i1: i1
    i2: i1
    conditioning: {}
    label: R8-GigabitEthernet0/0<->R7-GigabitEthernet0/0
  - id: l6
    n1: n7
    n2: n5
    i1: i1
    i2: i2
    conditioning: {}
    label: R6-GigabitEthernet0/0<->R5-GigabitEthernet0/1
  - id: l7
    n1: n7
    n2: n6
    i1: i2
    i2: i2
    conditioning: {}
    label: R6-GigabitEthernet0/1<->R7-GigabitEthernet0/1
  - id: l8
    n1: n0
    n2: n3
    i1: i3
    i2: i3
    conditioning: {}
    label: R2-GigabitEthernet0/2<->R3-GigabitEthernet0/2
lab:
  description: ''
  notes: |-
    # ENARSI Troubleshooting BGP Lab

    This network provides a full-mesh iBGP peering in AS65001 with **Loopback1** interfaces used instead of directly connected interfaces.  R2 and R3 advertise correct next hop information to their iBGP peers.  eBGP peering between R2 and R4 uses **Loopback1** instead of directly connected interfaces.

    R6 should prefer the path through R7 to reach the 10.1.1.0/24 network.

    The following networks are advertised into BGP:

    - **R1**: 10.1.1.0/24
    - **R4**: 10.1.4.0/24
    - **R6**: 10.1.6.0/24
    - **R8**: 10.1.8.0/24

    There are currently five neighbor relationship issues, one routing issue, and one path selection issue.  If you get stuck troubleshooting, you can use the "solution" instance of this lab to find the answers.
  title: Sample Lab 2 (BGP Troubleshooting)
  version: 0.2.1
